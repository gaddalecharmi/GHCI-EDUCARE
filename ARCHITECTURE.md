# ğŸ¯ MindSpark RBAC - System Architecture

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + TypeScript)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚   Student    â”‚  â”‚    Parent    â”‚  â”‚    Mentor    â”‚            â”‚
â”‚   â”‚  Dashboard   â”‚  â”‚  Dashboard   â”‚  â”‚  Dashboard   â”‚            â”‚
â”‚   â”‚              â”‚  â”‚              â”‚  â”‚              â”‚            â”‚
â”‚   â”‚ â€¢ Games      â”‚  â”‚ â€¢ Children   â”‚  â”‚ â€¢ Students   â”‚            â”‚
â”‚   â”‚ â€¢ Tasks      â”‚  â”‚ â€¢ Progress   â”‚  â”‚ â€¢ Analytics  â”‚            â”‚
â”‚   â”‚ â€¢ Focus      â”‚  â”‚ â€¢ Reports    â”‚  â”‚ â€¢ Feedback   â”‚            â”‚
â”‚   â”‚ â€¢ Library    â”‚  â”‚ â€¢ Settings   â”‚  â”‚ â€¢ Tasks      â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚              AuthContext (contexts/AuthContext.tsx)           â”‚ â”‚
â”‚   â”‚  â€¢ User state management                                      â”‚ â”‚
â”‚   â”‚  â€¢ Role checking (isStudent, isParent, isMentor, isAdmin)   â”‚ â”‚
â”‚   â”‚  â€¢ Permission checking (hasRole, hasPermission)              â”‚ â”‚
â”‚   â”‚  â€¢ Login/Logout functions                                    â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    Auth Page (pages/Auth.tsx)                 â”‚ â”‚
â”‚   â”‚  â€¢ Beautiful login/register form                             â”‚ â”‚
â”‚   â”‚  â€¢ Role selection (student/parent/mentor)                    â”‚ â”‚
â”‚   â”‚  â€¢ Conditional fields based on role                          â”‚ â”‚
â”‚   â”‚  â€¢ Error handling & loading states                           â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTP/HTTPS
                                â”‚ JWT Token + Roles + Permissions
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Node.js + Express)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                RBAC Middleware (middleware/rbac.js)           â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Authentication:                                              â”‚ â”‚
â”‚   â”‚  â€¢ authenticateToken() - Verify JWT & load roles/perms       â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Authorization:                                               â”‚ â”‚
â”‚   â”‚  â€¢ requireRole(role)         - Check user has role           â”‚ â”‚
â”‚   â”‚  â€¢ requirePermission(perm)   - Check user has permission     â”‚ â”‚
â”‚   â”‚  â€¢ requireParentAccess()     - Verify parent-child link      â”‚ â”‚
â”‚   â”‚  â€¢ requireMentorAccess()     - Verify mentor-student link    â”‚ â”‚
â”‚   â”‚  â€¢ requireOwnershipOrRole()  - Check ownership or elevated   â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Activity Tracking:                                           â”‚ â”‚
â”‚   â”‚  â€¢ logActivity()             - Log all important actions      â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Convenience Shortcuts:                                       â”‚ â”‚
â”‚   â”‚  â€¢ isStudent, isParent, isMentor, isAdmin                    â”‚ â”‚
â”‚   â”‚  â€¢ isParentOrAdmin, isMentorOrAdmin                          â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    API Routes (routes/)                       â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Authentication (auth.js):                                    â”‚ â”‚
â”‚   â”‚  â€¢ POST /api/auth/register - Register with role selection    â”‚ â”‚
â”‚   â”‚  â€¢ POST /api/auth/login    - Login with roles/permissions    â”‚ â”‚
â”‚   â”‚  â€¢ GET  /api/auth/profile  - Get user profile                â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Role Management (roles.js):                                  â”‚ â”‚
â”‚   â”‚  â€¢ GET    /api/roles                     - List all roles    â”‚ â”‚
â”‚   â”‚  â€¢ POST   /api/users/:id/roles           - Assign role       â”‚ â”‚
â”‚   â”‚  â€¢ DELETE /api/users/:id/roles/:role     - Remove role       â”‚ â”‚
â”‚   â”‚  â€¢ GET    /api/users/:id/permissions     - Get permissions   â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Parent Routes (roles.js):                                    â”‚ â”‚
â”‚   â”‚  â€¢ POST /api/parents/:id/children        - Link child        â”‚ â”‚
â”‚   â”‚  â€¢ GET  /api/parents/:id/children        - List children     â”‚ â”‚
â”‚   â”‚  â€¢ GET  /api/parents/:id/children/:id/progress - Progress    â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Mentor Routes (roles.js):                                    â”‚ â”‚
â”‚   â”‚  â€¢ POST /api/mentors/:id/students        - Link student      â”‚ â”‚
â”‚   â”‚  â€¢ GET  /api/mentors/:id/students        - List students     â”‚ â”‚
â”‚   â”‚  â€¢ GET  /api/mentors/:id/students/:id/progress - Progress    â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Admin Routes (roles.js):                                     â”‚ â”‚
â”‚   â”‚  â€¢ GET /api/admin/users          - List all users            â”‚ â”‚
â”‚   â”‚  â€¢ GET /api/admin/activity-logs  - View activity logs        â”‚ â”‚
â”‚   â”‚  â€¢ GET /api/admin/statistics     - System statistics         â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                  User Model (models/User.js)                  â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  User Management:                                             â”‚ â”‚
â”‚   â”‚  â€¢ findById(), findByEmail(), create(), update(), delete()   â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Role Management:                                             â”‚ â”‚
â”‚   â”‚  â€¢ assignRole(), removeRole(), getUserRoles(), hasRole()     â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Permission Management:                                       â”‚ â”‚
â”‚   â”‚  â€¢ getUserPermissions(), hasPermission()                     â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Relationship Management:                                     â”‚ â”‚
â”‚   â”‚  â€¢ addParentChildRelationship(), getChildren()               â”‚ â”‚
â”‚   â”‚  â€¢ addMentorStudentRelationship(), getStudents()             â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Analytics:                                                   â”‚ â”‚
â”‚   â”‚  â€¢ getUserStatistics(), getAllUsers()                        â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  Activity:                                                    â”‚ â”‚
â”‚   â”‚  â€¢ logActivity(), updatePointsAndLevel()                     â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ SQL Queries
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PostgreSQL Database                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                      Core RBAC Tables                         â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  roles                         permissions                    â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ id (UUID)                 â”œâ”€â”€ id (UUID)                 â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ name (VARCHAR)            â”œâ”€â”€ name (VARCHAR)            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ display_name              â”œâ”€â”€ display_name              â”‚ â”‚
â”‚   â”‚  â””â”€â”€ description               â”œâ”€â”€ resource                  â”‚ â”‚
â”‚   â”‚                                â”œâ”€â”€ action                     â”‚ â”‚
â”‚   â”‚  role_permissions              â””â”€â”€ description               â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ role_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚ â”‚
â”‚   â”‚  â””â”€â”€ permission_id â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚ â”‚
â”‚   â”‚                         â”‚          â”‚                         â”‚ â”‚
â”‚   â”‚  user_roles             â”‚          â”‚                         â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ user_id            â”‚          â”‚                         â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ role_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                         â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ assigned_by                   â”‚                         â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ assigned_at                   â”‚                         â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ expires_at                    â”‚                         â”‚ â”‚
â”‚   â”‚  â””â”€â”€ is_active                     â”‚                         â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                 Relationship Tables â”‚                          â”‚ â”‚
â”‚   â”‚                                     â”‚                          â”‚ â”‚
â”‚   â”‚  parent_child_relationships         â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ parent_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€> profiles            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ child_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€> profiles            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ relationship_type              â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ is_primary                     â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ can_view_progress              â”‚                          â”‚ â”‚
â”‚   â”‚  â””â”€â”€ can_manage_settings            â”‚                          â”‚ â”‚
â”‚   â”‚                                     â”‚                          â”‚ â”‚
â”‚   â”‚  mentor_student_relationships       â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ mentor_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€> profiles            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ student_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€> profiles            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ organization_name              â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ start_date                     â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ end_date                       â”‚                          â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ status                         â”‚                          â”‚ â”‚
â”‚   â”‚  â””â”€â”€ notes                          â”‚                          â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                      Activity Tracking                        â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  activity_logs                                                â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ id (UUID)                                                â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> profiles               â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ action (VARCHAR)         - What was done                â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ resource (VARCHAR)       - What was accessed            â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ resource_id (UUID)       - Specific item                â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ details (JSONB)          - Additional info              â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ ip_address (VARCHAR)     - Source IP                    â”‚ â”‚
â”‚   â”‚  â”œâ”€â”€ user_agent (TEXT)        - Browser info                 â”‚ â”‚
â”‚   â”‚  â””â”€â”€ created_at               - Timestamp                    â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  â€¢ Complete audit trail                                       â”‚ â”‚
â”‚   â”‚  â€¢ Indexed by user_id and created_at                         â”‚ â”‚
â”‚   â”‚  â€¢ Flexible JSONB details field                              â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    Database Functions                         â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  user_has_permission(user_id, permission_name)                â”‚ â”‚
â”‚   â”‚  â€¢ Returns boolean if user has specific permission           â”‚ â”‚
â”‚   â”‚  â€¢ Checks active roles and non-expired assignments           â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  get_user_roles(user_id)                                      â”‚ â”‚
â”‚   â”‚  â€¢ Returns table of active role names and display names      â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  log_activity(...)                                            â”‚ â”‚
â”‚   â”‚  â€¢ Convenience function to log activities                    â”‚ â”‚
â”‚   â”‚  â€¢ Returns UUID of created log entry                         â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                    Security Features                          â”‚ â”‚
â”‚   â”‚                                                               â”‚ â”‚
â”‚   â”‚  â€¢ Row Level Security (RLS) enabled on all tables            â”‚ â”‚
â”‚   â”‚  â€¢ Users can only access their own data                      â”‚ â”‚
â”‚   â”‚  â€¢ Parents can access linked children's data                 â”‚ â”‚
â”‚   â”‚  â€¢ Mentors can access linked students' data                  â”‚ â”‚
â”‚   â”‚  â€¢ Admins can access all data                                â”‚ â”‚
â”‚   â”‚  â€¢ Automatic updated_at triggers                             â”‚ â”‚
â”‚   â”‚  â€¢ Indexes on frequently queried columns                     â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


## Role Permission Matrix

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Permission                     â”‚ Student  â”‚ Parent â”‚ Mentor  â”‚  Admin  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ view_own_dashboard            â”‚    âœ“     â”‚   âœ“    â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ manage_own_tasks              â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ play_games                    â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ track_mood                    â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ use_focus_tools               â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ upload_documents              â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ join_community                â”‚    âœ“     â”‚   âœ“    â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ view_own_progress             â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ book_appointments             â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ use_extension                 â”‚    âœ“     â”‚        â”‚         â”‚    âœ“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ view_child_dashboard          â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”‚ view_child_progress           â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”‚ manage_child_settings         â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”‚ view_child_reports            â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”‚ communicate_with_mentors      â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”‚ schedule_for_child            â”‚          â”‚   âœ“    â”‚         â”‚    âœ“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ view_student_dashboard        â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ view_student_progress         â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ assign_tasks                  â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ provide_feedback              â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ manage_students               â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ view_analytics                â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”‚ communicate_with_parents      â”‚          â”‚        â”‚    âœ“    â”‚    âœ“    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ manage_all_users              â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ manage_roles                  â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ view_all_data                 â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ manage_content                â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ view_system_logs              â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ manage_specialists            â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ system_settings               â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â”‚ generate_reports              â”‚          â”‚        â”‚         â”‚    âœ“    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


## Data Flow Examples

### 1. User Registration with Role
```
User (Frontend)
    â”‚
    â”‚ POST /api/auth/register
    â”‚ { email, password, username, role: "student" }
    â”‚
    â–¼
Auth Routes (Backend)
    â”‚
    â”‚ 1. Validate input
    â”‚ 2. Hash password
    â”‚ 3. Create profile
    â”‚ 4. Assign role â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. Get roles/permissions      â”‚
    â”‚ 6. Log activity               â”‚
    â”‚ 7. Generate JWT               â”‚
    â”‚                               â–¼
    â”‚                         User Model
    â”‚                               â”‚
    â”‚                               â”‚ assignRole()
    â”‚                               â–¼
    â”‚                         Database
    â”‚                               â”‚
    â”‚                               â”‚ INSERT INTO user_roles
    â”‚                               â”‚ INSERT INTO activity_logs
    â”‚                               â”‚
    â–¼                               â–¼
Response: { token, user, roles, permissions }
```

### 2. Parent Viewing Child Progress
```
Parent (Frontend)
    â”‚
    â”‚ GET /api/parents/:parentId/children/:childId/progress
    â”‚ Authorization: Bearer <token>
    â”‚
    â–¼
RBAC Middleware
    â”‚
    â”‚ 1. authenticateToken() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Verify JWT
    â”‚ 2. requireParentAccess() â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                  â”‚
    â”‚                                  â–¼
    â”‚                           Check parent_child_relationships
    â”‚                                  â”‚
    â”‚                                  â”‚ Query: parent_id = X AND child_id = Y
    â”‚                                  â”‚
    â”‚                                  â–¼
    â”‚                           if exists AND can_view_progress:
    â”‚                               set req.childAccess
    â”‚                           else:
    â”‚                               403 Forbidden
    â”‚
    â–¼
Route Handler
    â”‚
    â”‚ Get child statistics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> User Model
    â”‚                                        â”‚
    â”‚                                        â”‚ getUserStatistics()
    â”‚                                        â–¼
    â”‚                                    Database
    â”‚                                        â”‚
    â”‚                                        â”‚ Aggregate queries
    â”‚                                        â”‚
    â–¼                                        â–¼
Response: { progress: { tasks, games, mood, etc. } }
```

### 3. Mentor Assigning Task to Student
```
Mentor (Frontend)
    â”‚
    â”‚ POST /api/students/:studentId/tasks
    â”‚ { title, description, priority }
    â”‚ Authorization: Bearer <token>
    â”‚
    â–¼
RBAC Middleware
    â”‚
    â”‚ 1. authenticateToken()
    â”‚ 2. requireMentorAccess() â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                  â”‚
    â”‚                                  â–¼
    â”‚                           Check mentor_student_relationships
    â”‚                                  â”‚
    â”‚                                  â”‚ Query: mentor_id = X 
    â”‚                                  â”‚        AND student_id = Y
    â”‚                                  â”‚        AND status = 'active'
    â”‚                                  â”‚
    â”‚                                  â–¼
    â”‚                           if exists:
    â”‚                               set req.studentAccess
    â”‚                           else:
    â”‚                               403 Forbidden
    â”‚
    â”‚ 3. requirePermission('assign_tasks')
    â”‚
    â–¼
Route Handler
    â”‚
    â”‚ Create task for student â”€â”€â”€â”€â”€â”€â”€â”€â”€> Database
    â”‚ Log activity â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> activity_logs
    â”‚
    â–¼
Response: { success: true, task: {...} }
```

### 4. Admin Viewing System Statistics
```
Admin (Frontend)
    â”‚
    â”‚ GET /api/admin/statistics
    â”‚ Authorization: Bearer <token>
    â”‚
    â–¼
RBAC Middleware
    â”‚
    â”‚ 1. authenticateToken()
    â”‚ 2. isAdmin (requireRole('admin'))
    â”‚        â”‚
    â”‚        â”‚ Check req.user.roles includes 'admin'
    â”‚        â”‚
    â”‚        â–¼
    â”‚    if not admin:
    â”‚        403 Forbidden
    â”‚
    â–¼
Route Handler
    â”‚
    â”‚ Query system statistics â”€â”€â”€â”€â”€â”€â”€â”€â”€> Database
    â”‚    â”‚
    â”‚    â”‚ COUNT users
    â”‚    â”‚ COUNT by role
    â”‚    â”‚ COUNT active users
    â”‚    â”‚ COUNT recent activities
    â”‚    â”‚
    â”‚    â–¼
    â”‚ Aggregate results
    â”‚
    â–¼
Response: { statistics: {...} }
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: Network Security                                â”‚
â”‚ â€¢ HTTPS/TLS encryption                                   â”‚
â”‚ â€¢ CORS whitelist                                         â”‚
â”‚ â€¢ Rate limiting                                          â”‚
â”‚ â€¢ DDoS protection                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: Authentication                                  â”‚
â”‚ â€¢ JWT token verification                                 â”‚
â”‚ â€¢ Token expiration checking                              â”‚
â”‚ â€¢ Session management                                     â”‚
â”‚ â€¢ Password hashing (bcrypt)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: Authorization (RBAC)                            â”‚
â”‚ â€¢ Role checking                                          â”‚
â”‚ â€¢ Permission verification                                â”‚
â”‚ â€¢ Relationship validation                                â”‚
â”‚ â€¢ Ownership verification                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: Data Access Control                             â”‚
â”‚ â€¢ Row Level Security (RLS)                               â”‚
â”‚ â€¢ Column-level permissions                               â”‚
â”‚ â€¢ Query filtering                                        â”‚
â”‚ â€¢ Data masking                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: Audit & Monitoring                              â”‚
â”‚ â€¢ Activity logging                                       â”‚
â”‚ â€¢ Failed access attempts                                 â”‚
â”‚ â€¢ Anomaly detection                                      â”‚
â”‚ â€¢ Compliance reporting                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture provides**:
- âœ… Secure, scalable role-based access control
- âœ… Complete audit trail for compliance
- âœ… Flexible permission system
- âœ… Support for complex relationships
- âœ… Easy to extend and maintain
